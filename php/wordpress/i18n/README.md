# i10n

tags: L10n, i18n, Wordpress, PHP


The way this works in WP is through use of WP's builtin `__()` function. There's a lot more to this but for the sake of brevity here's what a dev needs to know to work with this stuff.

So let's say I wanted to run:

`__('Hello!')`

It's just a string replacement function that gets it's replacement strings from a particular file (usually with the .po or .pot extension) instead of an array or some other data structure you might normally use in php.

The .po file will have a lot of frontmatter type stuff like this at the top:
```
# Copyright (C) 2018 Some Guy
# This file is distributed under the GPL-3.0+.
"Project-Id-Version: The Cool Plugin 4.1.14\n"
"Report-Msgid-Bugs-To: "
"https://wordpress.org/support/plugin/the-cool-plugin\n"
"POT-Creation-Date: 2018-09-29 04:00:45+00:00\n"
"MIME-Version: 1.0\n"
```

But it can be ignored. That stuff is mostly intended for the apps used by non-technical people for editing these, like Poedit. Just below that you will see something like

```
msgid "Change status to moderate"
msgstr "Cambiar estado a moderar"

msgid "Trash the post"
msgstr "a la Basura"

msgid "Cheating"
msgstr "a la Basura"
```
It's basically an object where the keys are the strings you need translated. If there is a value for the key you use, you get the associated translation, if not it just returns the same text. So again, if we were to run `__('Hello!')` against this, `__()` would just return `'Hello!'`. Let us add a line for translating it
```
msgid "Change status to moderate"
msgstr "Cambiar estado a moderar"

msgid "Trash the post"
msgstr "a la Basura"

msgid "Cheating"
msgstr "a la Basura"

msgid "Hello!"
msgstr "¡Hola!"
```

Now when we run `__('Hello!')` we get `'¡Hola!'`. Nice! Since we now understand everything there is to understand about .po and .pot files, there's a couple more things to know about this stuff:

## #1: I lied, `__()` actually uses .mo files, not .po
And .mo files are what's used by wordpress to actually do the translation. Not to worry, they are generated by the .po/.pot file. So if the file we were working with above was named `the-cool-plugin_spanish.po`, the generated .mo file might be something like `the-cool-plugin_spanish.mo`. The generation of .mo files can be in many ways. Poedit is one, there's also web based tools for it. If you prefer the terminal, msgfmt is a good option. Grunt and Gulp can even do it, with their respective potomo plugins.

## #2 Text Domains:
[May or may not](https://codex.wordpress.org/I18n_for_WordPress_Developers#Text_Domains) be something you have to do a lot of thinking about. Think of it as a form of namespacing for your translations. If you are making your own .mo files though, you are probably overriding WP's built in translation functionality, which is a whole other big markdown file unto itself.
